{% extends "taxlover/base.html" %}
{% load tax_extras %}
{% block content %}
    <div class="container px-0">
        <div class="row gx-3">
            <div class="col">
                <div class="accordion" id="accordionLeftLiabilities">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseOne"
                                    aria-expanded="true" aria-controls="collapseOne">
                                {% if liabilities_dto.has_mortgages or liabilities_dto.has_no_mortgages %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px;"></i></span>
                                {% endif %}
                                Mortgages
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers to the total amount of secured mortgage liabilities on property or land on June 30."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                             data-bs-parent="#accordionLeftLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any mortgage liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="mortgagesYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "mortgages" "yes" %}'" {{ liabilities_dto.has_mortgages }}>
                                    <label class="btn btn-outline-success" for="mortgagesYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="mortgagesNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "mortgages" "no" %}'" {{ liabilities_dto.has_no_mortgages }}>
                                    <label class="btn btn-outline-success" for="mortgagesNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_mortgages %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for mortgage in liabilities_dto.mortgages %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ mortgage.get_mortgage_description }}</td>
                                                    <td>{{ mortgage.get_mortgage_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('mortgage', '{{ mortgage.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('mortgage', '{{ mortgage.id }}')"
                                                           data-bs-target="#mortgageStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="mortgageStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Mortgage</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'mortgage-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="mortgage_id_for_delete"
                                                                               name="mortgage_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            mortgage?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-mortgage' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="mortgage_id"
                                                           name="mortgage_id">
                                                    <td></td>
                                                    <td>{{ m_form.mortgage_description }}</td>
                                                    <td>{{ m_form.mortgage_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="mortgageSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                {% if liabilities_dto.has_unsecured_loans or liabilities_dto.has_no_unsecured_loans %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Unsecured Loans
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers to the total amount of unsecured loan liabilities on June 30."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                             data-bs-parent="#accordionLeftLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any unsecured loan liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="unsecuredLoansYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "unsecured_loans" "yes" %}'" {{ liabilities_dto.has_unsecured_loans }}>
                                    <label class="btn btn-outline-success"
                                           for="unsecuredLoansYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="unsecuredLoansNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "unsecured_loans" "no" %}'" {{ liabilities_dto.has_no_unsecured_loans }}>
                                    <label class="btn btn-outline-success"
                                           for="unsecuredLoansNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_unsecured_loans %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for unsecured_loan in liabilities_dto.unsecured_loans %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ unsecured_loan.get_unsecured_loan_description }}</td>
                                                    <td>{{ unsecured_loan.get_unsecured_loan_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('unsecured_loan', '{{ unsecured_loan.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('unsecured_loan', '{{ unsecured_loan.id }}')"
                                                           data-bs-target="#unsecuredLoanStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="unsecuredLoanStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Unsecured Loan</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'unsecured-loan-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="unsecured_loan_id_for_delete"
                                                                               name="unsecured_loan_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            unsecured loan?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-unsecured-loan' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="unsecured_loan_id"
                                                           name="unsecured_loan_id">
                                                    <td></td>
                                                    <td>{{ ul_form.unsecured_loan_description }}</td>
                                                    <td>{{ ul_form.unsecured_loan_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="unsecuredLoanSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="accordion" id="accordionRightLiabilities">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingEight">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                                {% if liabilities_dto.has_jewellery or liabilities_dto.has_no_jewellery %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Jewellery
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers the quantity and value of jewellery at purchase cost. As like: Gold, Silver or Diamond Jewellery."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight"
                             data-bs-parent="#accordionRightLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Do you have any jewellery?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="jewelleryYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "jewellery" "yes" %}'" {{ liabilities_dto.has_jewellery }}>
                                    <label class="btn btn-outline-success" for="jewelleryYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="jewelleryNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "jewellery" "no" %}'" {{ liabilities_dto.has_no_jewellery }}>
                                    <label class="btn btn-outline-success" for="jewelleryNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_jewellery %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for jewellery in liabilities_dto.jewelleries %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ jewellery.get_jewellery_description }}</td>
                                                    <td>{{ jewellery.get_jewellery_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('jewellery', '{{ jewellery.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('jewellery', '{{ jewellery.id }}')"
                                                           data-bs-target="#jewelleryStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="jewelleryStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Jewellery</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'jewellery-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="jewellery_id_for_delete"
                                                                               name="jewellery_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            jewellery?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-jewellery' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="jewellery_id"
                                                           name="jewellery_id">
                                                    <td></td>
                                                    <td>{{ j_form.jewellery_description }}</td>
                                                    <td>{{ j_form.jewellery_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="jewellerySaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingNine">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                                {% if liabilities_dto.has_electronic_equipment or liabilities_dto.has_no_electronic_equipment %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Electronic Equipment
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers all kinds residential and family use electric equipment in purchase cost. As like : TV, Freeze, AC, Personal Computer etc."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine"
                             data-bs-parent="#accordionRightLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Do you have any electronic equipment?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="otherSourcesYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "electronic_equipment" "yes" %}'" {{ liabilities_dto.has_electronic_equipment }}>
                                    <label class="btn btn-outline-success" for="otherSourcesYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="otherSourcesNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "electronic_equipment" "no" %}'" {{ liabilities_dto.has_no_electronic_equipment }}>
                                    <label class="btn btn-outline-success" for="otherSourcesNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_electronic_equipment %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for electronic_equipment in liabilities_dto.electronic_equipments %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ electronic_equipment.get_equipment_description }}</td>
                                                    <td>{{ electronic_equipment.get_equipment_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('electronic_equipment', '{{ electronic_equipment.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('electronic_equipment', '{{ electronic_equipment.id }}')"
                                                           data-bs-target="#electronicEquipmentStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="electronicEquipmentStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Electronic Equipment</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'electronic-equipment-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="electronic_equipment_id_for_delete"
                                                                               name="electronic_equipment_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            electronic equipment?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-electronic-equipment' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="electronic_equipment_id"
                                                           name="electronic_equipment_id">
                                                    <td></td>
                                                    <td>{{ ee_form.equipment_description }}</td>
                                                    <td>{{ ee_form.equipment_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="electronicEquipmentSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            let last = Cookies.get('activeAccordionGroupForLiabilities');

            if (last != null) {
                //remove default collapse settings
                $("#accordionLeftLiabilities .collapse").removeClass('show');
                $("#accordionLeftLiabilities .accordion-button").addClass('collapsed');
                //show the last visible group
                $("#" + last).addClass("show");
                let lastHeading = 'heading' + last.split("collapse")[1];
                $("#" + lastHeading + ' .accordion-button').removeClass("collapsed");
            } else {
                $("#collapseOne").addClass("show");
                $("#collapseOne" + ' .accordion-button').removeClass("collapsed");
            }
        });

        //when a group is shown, save it as the active accordion group
        $("#accordionLeftLiabilities").bind('shown.bs.collapse', function () {
            let active = $("#accordionLeftLiabilities .show").attr('id');
            Cookies.set('activeAccordionGroupForLiabilities', active);

            $("#accordionRightLiabilities .collapse").removeClass('show');
            $("#accordionRightLiabilities .accordion-button").addClass('collapsed');
        });

        $("#accordionRightLiabilities").bind('shown.bs.collapse', function () {
            let active = $("#accordionRightLiabilities .show").attr('id');
            Cookies.set('activeAccordionGroupForLiabilities', active);

            $("#accordionLeftLiabilities .collapse").removeClass('show');
            $("#accordionLeftLiabilities .accordion-button").addClass('collapsed');
        });

        function getDataForEdit(section, id) {
            let url = '{% url "get-data-for-edit" %}';

            let data = {
                'section': section,
                'id': id
            };

            $.ajax({
                type: 'GET',
                url: url,
                data: data,
                success: function (data) {
                    if (section === 'mortgage') {
                        setInputValue('mortgage_id', data['id']);
                        setInputValue('id_mortgage_description', data['mortgage_description']);
                        setInputValue('id_mortgage_value', addCommas(formatToTwoDecimalPlaces(data['mortgage_value'])));
                        document.getElementById('mortgageSaveBtn').innerHTML = 'Update';
                    } else if (section === 'unsecured_loan') {
                        setInputValue('unsecured_loan_id', data['id']);
                        setInputValue('id_unsecured_loan_description', data['unsecured_loan_description']);
                        setInputValue('id_unsecured_loan_value', addCommas(formatToTwoDecimalPlaces(data['unsecured_loan_value'])));
                        document.getElementById('unsecuredLoanSaveBtn').innerHTML = 'Update';
                    } else if (section === 'bank_loan') {
                        setInputValue('bank_loan_id', data['id']);
                        setInputValue('id_bank_loan_description', data['bank_loan_description']);
                        setInputValue('id_bank_loan_value', addCommas(formatToTwoDecimalPlaces(data['bank_loan_value'])));
                        document.getElementById('bankLoanSaveBtn').innerHTML = 'Update';
                    } else if (section === 'other_liability') {
                        setInputValue('other_liability_id', data['id']);
                        setInputValue('id_other_liability_description', data['other_liability_description']);
                        setInputValue('id_other_liability_value', addCommas(formatToTwoDecimalPlaces(data['other_liability_value'])));
                        document.getElementById('otherLiabilitySaveBtn').innerHTML = 'Update';
                    }
                }
            });
        }

        function getDataForDelete(section, id) {
            if (section === 'mortgage') {
                setInputValue('mortgage_id_for_delete', id);
            } else if (section === 'unsecured_loan') {
                setInputValue('unsecured_loan_id_for_delete', id);
            } else if (section === 'bank_loan') {
                setInputValue('bank_loan_id_for_delete', id);
            } else if (section === 'other_liability') {
                setInputValue('other_liability_id_for_delete', id);
            }
        }

        function onInputBlurred(textBoxObject) {
            if (!isNaN(removeCommas(textBoxObject.value))) {
                textBoxObject.value = removeCommas(textBoxObject.value);
                textBoxObject.value = addCommas(formatToTwoDecimalPlaces(textBoxObject.value));
            }
        }
    </script>
{% endblock content %}