{% extends "taxlover/base.html" %}
{% load tax_extras %}
{% block content %}
    <div class="container px-0">
        <div class="row gx-3">
            <div class="col">
                <div class="accordion" id="accordionLeftLiabilities">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseOne"
                                    aria-expanded="true" aria-controls="collapseOne">
                                {% if liabilities_dto.has_mortgages or liabilities_dto.has_no_mortgages %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px;"></i></span>
                                {% endif %}
                                Mortgages
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers to the total amount of secured mortgage liabilities on property or land on June 30."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                             data-bs-parent="#accordionLeftLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any mortgage liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="mortgagesYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "mortgages" "yes" %}'" {{ liabilities_dto.has_mortgages }}>
                                    <label class="btn btn-outline-success" for="mortgagesYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="mortgagesNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "mortgages" "no" %}'" {{ liabilities_dto.has_no_mortgages }}>
                                    <label class="btn btn-outline-success" for="mortgagesNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_mortgages %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for mortgage in liabilities_dto.mortgages %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ mortgage.get_mortgage_description }}</td>
                                                    <td>{{ mortgage.get_mortgage_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('mortgage', '{{ mortgage.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('mortgage', '{{ mortgage.id }}')"
                                                           data-bs-target="#mortgageStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="mortgageStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Mortgage</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'mortgage-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="mortgage_id_for_delete"
                                                                               name="mortgage_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            mortgage?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-mortgage' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="mortgage_id"
                                                           name="mortgage_id">
                                                    <td></td>
                                                    <td>{{ m_form.mortgage_description }}</td>
                                                    <td>{{ m_form.mortgage_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="mortgageSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                {% if liabilities_dto.has_unsecured_loans or liabilities_dto.has_no_unsecured_loans %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Unsecured Loans
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers to the total amount of unsecured loan liabilities on June 30."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                             data-bs-parent="#accordionLeftLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any unsecured loan liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="unsecuredLoansYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "unsecured_loans" "yes" %}'" {{ liabilities_dto.has_unsecured_loans }}>
                                    <label class="btn btn-outline-success"
                                           for="unsecuredLoansYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="unsecuredLoansNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "unsecured_loans" "no" %}'" {{ liabilities_dto.has_no_unsecured_loans }}>
                                    <label class="btn btn-outline-success"
                                           for="unsecuredLoansNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_unsecured_loans %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for unsecured_loan in liabilities_dto.unsecured_loans %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ unsecured_loan.get_unsecured_loan_description }}</td>
                                                    <td>{{ unsecured_loan.get_unsecured_loan_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('unsecured_loan', '{{ unsecured_loan.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('unsecured_loan', '{{ unsecured_loan.id }}')"
                                                           data-bs-target="#unsecuredLoanStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="unsecuredLoanStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Unsecured Loan</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'unsecured-loan-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="unsecured_loan_id_for_delete"
                                                                               name="unsecured_loan_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            unsecured loan?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-unsecured-loan' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="unsecured_loan_id"
                                                           name="unsecured_loan_id">
                                                    <td></td>
                                                    <td>{{ ul_form.unsecured_loan_description }}</td>
                                                    <td>{{ ul_form.unsecured_loan_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="unsecuredLoanSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="accordion" id="accordionRightLiabilities">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                {% if liabilities_dto.has_bank_loans or liabilities_dto.has_no_bank_loans %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Bank Loans
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="This refers to the total amount of bank loan liabilities on June 30."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                             data-bs-parent="#accordionRightLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any bank loan liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="bankLoanYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "bank_loans" "yes" %}'" {{ liabilities_dto.has_bank_loans }}>
                                    <label class="btn btn-outline-success" for="bankLoanYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="bankLoanNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "bank_loans" "no" %}'" {{ liabilities_dto.has_no_bank_loans }}>
                                    <label class="btn btn-outline-success" for="bankLoanNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_bank_loans %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for bank_loan in liabilities_dto.bank_loans %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ bank_loan.get_bank_loan_description }}</td>
                                                    <td>{{ bank_loan.get_bank_loan_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('bank_loan', '{{ bank_loan.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('bank_loan', '{{ bank_loan.id }}')"
                                                           data-bs-target="#bankLoanStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="bankLoanStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Bank Loan</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'bank-loan-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="bank_loan_id_for_delete"
                                                                               name="bank_loan_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            bank loan?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-bank-loan' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="bank_loan_id"
                                                           name="bank_loan_id">
                                                    <td></td>
                                                    <td>{{ bl_form.bank_loan_description }}</td>
                                                    <td>{{ bl_form.bank_loan_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="bankLoanSaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                {% if liabilities_dto.has_other_liabilities or liabilities_dto.has_no_other_liabilities %}
                                    <span><i class="bi bi-check-circle-fill"
                                             style="color: #2ca01c; padding-right: 7px"></i></span>
                                {% endif %}
                                Other Liabilities
                                <sup style="padding-left: 5px;">
                                    <i class="bi bi-info-circle" style="color: red; font-size: 14px"
                                       data-bs-toggle="tooltip" data-bs-placement="right"
                                       title="The amount of money for any other liabilities of taxpayer."></i>
                                </sup>
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                             data-bs-parent="#accordionRightLiabilities">
                            <div class="accordion-body hor-align-center">
                                <strong>Did you have any other liabilities?</strong>
                                <br/>
                                <div class="btn-group padding-top-8" role="group" aria-label="Yes No Buttons">
                                    <input type="checkbox" class="btn-check" id="otherSourcesYesBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "other_liabilities" "yes" %}'" {{ liabilities_dto.has_other_liabilities }}>
                                    <label class="btn btn-outline-success" for="otherSourcesYesBtn">Yes</label>
                                    <input type="checkbox" class="btn-check" id="otherSourcesNoBtn"
                                           autocomplete="off"
                                           onclick="location.href='{% url "save-liabilities-data" "other_liabilities" "no" %}'" {{ liabilities_dto.has_no_other_liabilities }}>
                                    <label class="btn btn-outline-success" for="otherSourcesNoBtn">No</label>
                                </div>
                                {% if liabilities_dto.has_other_liabilities %}
                                    <div style="padding-top: 20px">
                                        <table class="table table-striped table-bordered">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Description</th>
                                                <th scope="col">Value</th>
                                                <th scope="col"></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {% for other_liability in liabilities_dto.other_liabilities %}
                                                <tr>
                                                    <th scope="row">{{ forloop.counter }}</th>
                                                    <td>{{ other_liability.get_other_liability_description }}</td>
                                                    <td>{{ other_liability.get_other_liability_value|format_decimal }}</td>
                                                    <td>
                                                        <a href="javascript:void(0)"
                                                           onclick="getDataForEdit('other_liability', '{{ other_liability.id }}')">
                                                            <i class="bi bi-pencil-square"
                                                               style="color: #2ca01c; padding-right: 5px; font-size: 1.2rem"></i></a>
                                                        <a href="#" data-bs-toggle="modal"
                                                           onclick="getDataForDelete('other_liability', '{{ other_liability.id }}')"
                                                           data-bs-target="#otherLiabilityStaticBackdrop">
                                                            <i class="bi bi-trash"
                                                               style="color: red; padding-left: 5px; font-size: 1.2rem"></i></a>
                                                        <!-- Modal -->
                                                        <div class="modal fade" id="otherLiabilityStaticBackdrop"
                                                             data-bs-backdrop="static"
                                                             data-bs-keyboard="false" tabindex="-1"
                                                             aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="staticBackdropLabel">Delete
                                                                            Other Liability</h5>
                                                                        <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                    </div>
                                                                    <form action="{% url 'other-liability-delete' %}"
                                                                          method="POST">
                                                                        {% csrf_token %}
                                                                        <input type="hidden"
                                                                               id="other_liability_id_for_delete"
                                                                               name="other_liability_id_for_delete">
                                                                        <div class="modal-body"
                                                                             style="text-align: left">
                                                                            Are you sure you want to delete the
                                                                            other liability?
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            <button type="button"
                                                                                    class="btn btn-secondary"
                                                                                    data-bs-dismiss="modal">Cancel
                                                                            </button>
                                                                            <button type="submit"
                                                                                    class="btn btn-primary">
                                                                                Delete
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            <tr>
                                                <form method="post"
                                                      action="{% url 'save-other-liability' %}">
                                                    {% csrf_token %}
                                                    <input type="hidden" id="other_liability_id"
                                                           name="other_liability_id">
                                                    <td></td>
                                                    <td>{{ ol_form.other_liability_description }}</td>
                                                    <td>{{ ol_form.other_liability_value }}</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary"
                                                                id="otherLiabilitySaveBtn">Save
                                                        </button>
                                                    </td>
                                                </form>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {
            let last = Cookies.get('activeAccordionGroupForLiabilities');

            if (last != null) {
                //remove default collapse settings
                $("#accordionLeftLiabilities .collapse").removeClass('show');
                $("#accordionLeftLiabilities .accordion-button").addClass('collapsed');
                //show the last visible group
                $("#" + last).addClass("show");
                let lastHeading = 'heading' + last.split("collapse")[1];
                $("#" + lastHeading + ' .accordion-button').removeClass("collapsed");
            } else {
                $("#collapseOne").addClass("show");
                $("#collapseOne" + ' .accordion-button').removeClass("collapsed");
            }
        });

        //when a group is shown, save it as the active accordion group
        $("#accordionLeftLiabilities").bind('shown.bs.collapse', function () {
            let active = $("#accordionLeftLiabilities .show").attr('id');
            Cookies.set('activeAccordionGroupForLiabilities', active);

            $("#accordionRightLiabilities .collapse").removeClass('show');
            $("#accordionRightLiabilities .accordion-button").addClass('collapsed');
        });

        $("#accordionRightLiabilities").bind('shown.bs.collapse', function () {
            let active = $("#accordionRightLiabilities .show").attr('id');
            Cookies.set('activeAccordionGroupForLiabilities', active);

            $("#accordionLeftLiabilities .collapse").removeClass('show');
            $("#accordionLeftLiabilities .accordion-button").addClass('collapsed');
        });

        function getDataForEdit(section, id) {
            let url = '{% url "get-data-for-edit" %}';

            let data = {
                'section': section,
                'id': id
            };

            $.ajax({
                type: 'GET',
                url: url,
                data: data,
                success: function (data) {
                    if (section === 'mortgage') {
                        setInputValue('mortgage_id', data['id']);
                        setInputValue('id_mortgage_description', data['mortgage_description']);
                        setInputValue('id_mortgage_value', addCommas(formatToTwoDecimalPlaces(data['mortgage_value'])));
                        document.getElementById('mortgageSaveBtn').innerHTML = 'Update';
                    } else if (section === 'unsecured_loan') {
                        setInputValue('unsecured_loan_id', data['id']);
                        setInputValue('id_unsecured_loan_description', data['unsecured_loan_description']);
                        setInputValue('id_unsecured_loan_value', addCommas(formatToTwoDecimalPlaces(data['unsecured_loan_value'])));
                        document.getElementById('unsecuredLoanSaveBtn').innerHTML = 'Update';
                    } else if (section === 'bank_loan') {
                        setInputValue('bank_loan_id', data['id']);
                        setInputValue('id_bank_loan_description', data['bank_loan_description']);
                        setInputValue('id_bank_loan_value', addCommas(formatToTwoDecimalPlaces(data['bank_loan_value'])));
                        document.getElementById('bankLoanSaveBtn').innerHTML = 'Update';
                    } else if (section === 'other_liability') {
                        setInputValue('other_liability_id', data['id']);
                        setInputValue('id_other_liability_description', data['other_liability_description']);
                        setInputValue('id_other_liability_value', addCommas(formatToTwoDecimalPlaces(data['other_liability_value'])));
                        document.getElementById('otherLiabilitySaveBtn').innerHTML = 'Update';
                    }
                }
            });
        }

        function getDataForDelete(section, id) {
            if (section === 'mortgage') {
                setInputValue('mortgage_id_for_delete', id);
            } else if (section === 'unsecured_loan') {
                setInputValue('unsecured_loan_id_for_delete', id);
            } else if (section === 'bank_loan') {
                setInputValue('bank_loan_id_for_delete', id);
            } else if (section === 'other_liability') {
                setInputValue('other_liability_id_for_delete', id);
            }
        }

        function onInputBlurred(textBoxObject) {
            if (!isNaN(removeCommas(textBoxObject.value))) {
                textBoxObject.value = removeCommas(textBoxObject.value);
                textBoxObject.value = addCommas(formatToTwoDecimalPlaces(textBoxObject.value));
            }
        }
    </script>
{% endblock content %}